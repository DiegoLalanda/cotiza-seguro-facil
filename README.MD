<div align="center">
  <h1>Cotiza Seguro F√°cil</h1>
  <p><strong>Una plataforma Full-Stack para la gesti√≥n de cotizaciones de seguros de veh√≠culos.</strong></p>
  <p>Backend con NestJS, Frontend con Angular y base de datos PostgreSQL.</p>
  <a href="https://cotiza-seguro-facil-frontend.onrender.com/" target="_blank">
    <img src="https://img.shields.io/badge/Visitar_App-Online-brightgreen?style=for-the-badge&logo=render" alt="Live App">
  </a>
</div>

<br>

<div align="center">


</div>

## üéØ Objetivo del Proyecto

**Cotiza Seguro F√°cil** es una aplicaci√≥n web full-stack dise√±ada para optimizar el proceso de cotizaci√≥n de seguros para veh√≠culos. La plataforma permite a los usuarios registrar sus datos y los de su veh√≠culo de forma r√°pida y sencilla. Posteriormente, un asesor comercial utiliza un **dashboard de administraci√≥n interno** para acceder a esta informaci√≥n, contactar al cliente y ofrecerle la mejor cotizaci√≥n posible, centralizando as√≠ la gesti√≥n de leads y la cartera de clientes.

Este proyecto fue desarrollado como una soluci√≥n completa y escalable, demostrando habilidades en arquitectura de software, desarrollo backend y frontend, y despliegue en la nube.

---

## ‚ú® Caracter√≠sticas Principales

### Para el Usuario:
- **Formulario Inteligente:** Un proceso de un solo paso para registrar datos del cliente y su veh√≠culo.
- **Validaci√≥n en Tiempo Real:** Feedback instant√°neo para asegurar que los datos ingresados sean correctos.
- **Notificaciones por Email:** Confirmaci√≥n autom√°tica al cliente y notificaci√≥n al administrador tras una nueva solicitud.

### Para el Administrador:
- **Dashboard Centralizado:** Un panel de control seguro para visualizar y gestionar todos los leads (clientes potenciales).
- **Autenticaci√≥n Segura:** Sistema de login basado en **JWT (JSON Web Tokens)** para proteger el acceso al dashboard.
- **B√∫squeda y Filtrado Avanzado:** Permite buscar clientes por nombre, DNI o filtrar por marca de veh√≠culo y rango de fechas.
- **Paginaci√≥n Eficiente:** Manejo optimizado de grandes vol√∫menes de datos para una carga r√°pida y fluida.

---

## üõ†Ô∏è Stack Tecnol√≥gico y Arquitectura

Este proyecto est√° construido sobre un stack moderno y robusto, ideal para aplicaciones escalables y de alto rendimiento.

| √Årea | Tecnolog√≠a | Descripci√≥n |
| :--- | :--- | :--- |
| **Backend** | ![NestJS](https://img.shields.io/badge/-NestJS-E0234E?style=for-the-badge&logo=nestjs&logoColor=white) | Framework progresivo de Node.js para construir aplicaciones de servidor eficientes y escalables. |
| **Frontend** | ![Angular](https://img.shields.io/badge/-Angular-DD0031?style=for-the-badge&logo=angular&logoColor=white) | Plataforma de desarrollo para construir aplicaciones web de una sola p√°gina (SPA). |
| **Base de Datos** | ![PostgreSQL](https://img.shields.io/badge/-PostgreSQL-336791?style=for-the-badge&logo=postgresql&logoColor=white) | Sistema de gesti√≥n de bases de datos relacional de objetos, potente y de c√≥digo abierto. |
| **ORM** | ![TypeORM](https://img.shields.io/badge/-TypeORM-F26B21?style=for-the-badge) | ORM que puede ejecutarse en plataformas NodeJS y es compatible con TypeScript. |
| **Estilos (UI)** | ![Tailwind CSS](https://img.shields.io/badge/-Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white) | Framework de CSS "utility-first" para un dise√±o r√°pido y personalizado. |
| **Despliegue** | ![Render](https://img.shields.io/badge/-Render-46E3B7?style=for-the-badge&logo=render&logoColor=white) & ![Neon](https://img.shields.io/badge/-Neon-00E599?style=for-the-badge&logo=neon&logoColor=black) | **Backend y Frontend** desplegados como servicios en Render. **Base de datos PostgreSQL** gestionada en Neon. |

<br>

###  Architectural Highlights

*   **Arquitectura Monorepo:** El c√≥digo del backend y del frontend se gestionan en un √∫nico repositorio para una mayor cohesi√≥n y facilidad de mantenimiento.
*   **API RESTful:** El backend expone una API REST bien definida y documentada siguiendo las mejores pr√°cticas.
*   **Manejo de Transacciones:** El proceso de creaci√≥n de leads (`createLead`) se encapsula en una **transacci√≥n de base de datos** (`DataSource.createQueryRunner`) para garantizar la integridad de los datos. Si la creaci√≥n del veh√≠culo o del cliente falla, toda la operaci√≥n se revierte (`rollback`), evitando registros inconsistentes.
*   **Seguridad:**
    *   **Hashing de contrase√±as con `bcrypt`** en el backend (`@BeforeInsert` en la entidad `Admin`).
    *   **Estrategia de Passport-JWT** para proteger las rutas del administrador. Los tokens se firman con secretos almacenados de forma segura como variables de entorno.
*   **Validaci√≥n de Datos (DTOs):** Se utiliza `class-validator` y `class-transformer` en el backend para validar rigurosamente todos los datos entrantes (DTOs), asegurando que solo la informaci√≥n correcta llegue a la l√≥gica de negocio.
*   **Optimizaci√≥n de Consultas:** En el dashboard, la paginaci√≥n se implementa con una estrategia de dos pasos para m√°xima eficiencia:
    1.  Una primera consulta ligera obtiene el conteo total y los `IDs` de la p√°gina actual.
    2.  Una segunda consulta recupera los datos completos (`JOINs`) solo para esos `IDs`, evitando traer datos innecesarios y mejorando dr√°sticamente el rendimiento.

---

## üöÄ Despliegue y CI/CD

La aplicaci√≥n est√° completamente desplegada en la nube utilizando una arquitectura serverless y de servicios gestionados:

-   **Backend (NestJS):** Desplegado como un **Web Service** en Render, conectado directamente al repositorio de GitHub para despliegue continuo (CI/CD).
-   **Frontend (Angular):** Desplegado como un **Static Site** en Render, optimizado para una entrega global r√°pida.
-   **Base de Datos (PostgreSQL):** Alojada en **Neon**, una plataforma de PostgreSQL serverless que ofrece escalabilidad, branching y auto-scaling. La conexi√≥n entre Render y Neon est√° asegurada mediante SSL.
-   **Variables de Entorno:** Todas las credenciales sensibles (claves de API, secretos de JWT, credenciales de DB) se gestionan a trav√©s del sistema de variables de entorno de Render, nunca se exponen en el c√≥digo fuente.

---

## ‚öôÔ∏è C√≥mo Ejecutar el Proyecto Localmente

Para ejecutar este proyecto en tu m√°quina local, sigue estos pasos:

### Prerrequisitos
- Node.js (v18 o superior)
- npm o yarn
- Angular CLI
- Una instancia local de PostgreSQL corriendo

### Pasos

1.  **Clona el repositorio:**
    ```bash
    git clone https://github.com/DiegoLalanda/cotiza-seguro-facil
    cd cotiza-seguro-facil
    ```

2.  **Configura el Backend:**
    ```bash
    cd backend
    npm install
    ```
    A continuaci√≥n, crea un archivo `.env` en la carpeta `backend/`. Puedes copiar la siguiente plantilla y rellenarla con tus datos.

    <details>
    <summary>üìÑ <strong>Click para ver la plantilla <code>.env.example</code></strong></summary>

    ```dotenv
    # Entorno de la aplicaci√≥n (development, production, etc.)
    NODE_ENV=development

    # --- Configuraci√≥n de la Base de Datos PostgreSQL (Local) ---
    # Aseg√∫rate de que estos valores coincidan con tu configuraci√≥n de PostgreSQL
    DB_HOST=localhost
    DB_PORT=5432
    DB_USERNAME=postgres_user
    DB_PASSWORD=mysecretpassword
    DB_DATABASE=cotiza_seguro_db

    # --- Credenciales para el seeding del primer Administrador (solo en desarrollo) ---
    # Este usuario se crear√° autom√°ticamente la primera vez que inicies el servidor
    ADMIN_USERNAME=admin
    ADMIN_PASSWORD=strongAdminPassword123!
    ADMIN_EMAIL=admin@example.com

    # --- Configuraci√≥n de JSON Web Token (JWT) ---
    # Genera una cadena aleatoria y larga para JWT_SECRET
    JWT_SECRET=esto-es-un-secreto-muy-largo-y-dificil-de-adivinar
    JWT_EXPIRES_IN=1h

    # --- Configuraci√≥n del Servicio de Email (Nodemailer) ---
    # Email del administrador que recibir√° las notificaciones de nuevos leads
    ADMIN_NOTIFICATION_EMAIL=admin-notifications@example.com

    # Credenciales de un servicio SMTP (ej. Gmail, SendGrid, Mailtrap)
    # NOTA: Si usas Gmail, puede que necesites una "Contrase√±a de Aplicaci√≥n"
    EMAIL_HOST=smtp.gmail.com
    EMAIL_PORT=465
    EMAIL_USER=tu-email@gmail.com
    EMAIL_PASS=tu-contrase√±a-de-aplicacion
    EMAIL_FROM="Cotiza Seguro F√°cil <tu-email@gmail.com>"
    ```
    </details>
    <br>

    Una vez que tu archivo `.env` est√© configurado, puedes iniciar el servidor de desarrollo:
    ```bash
    # Ejecuta el servidor de desarrollo
    npm run start:dev
    ```
    El backend se ejecutar√° en `http://localhost:3000` (o el puerto que hayas configurado).


3.  **Configura el Frontend:**
    ```bash
    cd ../frontend # Desde la ra√≠z del proyecto
    npm install
    
    # Aseg√∫rate de que la URL de la API en `src/environments/environment.ts`
    # apunta a tu backend local (por defecto: 'http://localhost:3000')
    
    # Ejecuta la aplicaci√≥n de Angular
    ng serve -o
    ```
La aplicaci√≥n web estar√° disponible en `http://localhost:4200`.

---
<div align="center">
  <p>Desarrollado con ‚ù§Ô∏è por Diego Javier Lalanda</p>
  <p>
    <a href="https://www.linkedin.com/in/diego-lalanda-9576b21b8/" target="_blank">LinkedIn</a> | 
    <a href="https://github.com/DiegoLalanda" target="_blank">GitHub</a>
  </p>
</div>